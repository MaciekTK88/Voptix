<!DOCTYPE html>

<html>

<head>
    <script type="text/javascript" src="/script/gl-matrix.js"></script>
    <script type="text/javascript" src="/script/perlin.js"></script>
    <script type="text/javascript" src="/script/helper.js"></script>
    <script type="text/javascript" src="/script/octree.js"></script>
    <script type="text/javascript" src="/script/worldgen.js"></script>
    <script type="text/javascript" src="/script/control.js"></script>
    <script type="text/javascript" src="/script/renderer.js"></script>

    <link rel="stylesheet" href="/styles/style.css">
    <title>Voptix</title>
</head>

<body>
    <p id="fps_counter">FPS:</p>
    <div id="canvas_container">
        <canvas id="glCanvas" width="800" height="600"></canvas>
        <div class="crosshair"></div>

        <!--by MaciekTk88-->
        <div id="polowaprzewijana">
            <div class="Wrapper">
                <div class="pole1">
                    <div class=" edytor">VOXEL</div>

                    <div class="suwaki">
                        <div class="slidecontainer"></div>
                        <font style="font-size: 30px; color: red; font-family: Impact">R.</font>
                        <input type="range" min="0" max="255" value="255" id="RRange">
                        <span style="font-size: 30px; color: red; font-family: Impact" id="Rtext"></span>

                        <br>

                        <font style="font-size: 30px; color: green; font-family: Impact">G.</font>
                        <input type="range" min="0" max="255" value="255" id="GRange">
                        <span style="font-size: 30px; color: green; font-family: Impact" id="Gtext"></span>


                        <br>

                        <font style="font-size: 30px; color: blue; font-family: Impact">B.</font>
                        <input type="range" min="0" max="255" value="255" id="BRange">
                        <span style="font-size: 30px; color: blue; font-family: Impact" id="Btext"></span>

                        <br>

                        <font style="font-size: 30px; color: white; font-family: Impact">C.</font>
                        <input type="range" min="0" max="255" value="255" id="ARange">
                        <span style="font-size: 30px; color: white; font-family: Impact" id="Atext"></span>

                        <br>

                        <font style="font-size: 30px; color: white; font-family: Impact">E.&nbsp;</font>
                        <input type="range" min="0" max="255" value="255" id="ERange">
                        <span style="font-size: 30px; color: white; font-family: Impact" id="Etext"></span>

                        <br>

                        <font style="font-size: 30px; color: white; font-family: Impact">P.&nbsp;</font>
                        <input type="range" min="0" max="64" value="0" id="PRange">
                        <span style="font-size: 30px; color: white; font-family: Impact" id="Ptext"></span>

                        <br>

                        <button type="button"  onclick="addToPalette(brush.color_r, brush.color_g, brush.color_b, brush.clarity, brush.emission, brush.palette_id);">Add to palette</button>
                    </div>

                    <div id="suwaki">
                        <div class="zdiencie">
                            <div id="square">
                                <div id="gora">

                                    <img src="/images/gora.jpg" width="200" height="200">

                                    <script>
                                        function updateSliders() {
                                            r = brush.color_r;
                                            g = brush.color_g;
                                            b = brush.color_b;

                                            sliderR.value = r;
                                            sliderG.value = g;
                                            sliderB.value = b;

                                            outputR.innerHTML = r;
                                            outputG.innerHTML = g;
                                            outputB.innerHTML = b;

                                            square.style.backgroundColor = ["rgb(", r, ",", g, ",", b, ")"].join("");
                                        }

                                        var r = 255, g = 255, b = 255, c = 0, e = 0, p = 0;
                                        var square = document.getElementById("square");
                                        var gora = document.getElementById("gora");

                                        var sliderR = document.getElementById("RRange");
                                        var outputR = document.getElementById("Rtext");
                                        outputR.innerHTML = sliderR.value; // Display the default slider value
                                        sliderR.oninput = function () {
                                            outputR.innerHTML = sliderR.value;
                                            r = sliderR.value;
                                            square.style.backgroundColor = ["rgb(", r, ",", g, ",", b, ")"].join("");
                                            brush.color_r = r;
                                            brush.color_g = g;
                                            brush.color_b = b;
                                            brush.clarity = c;
                                            brush.emission = e;
                                            brush.palette_id = p;
                                        }

                                        var sliderG = document.getElementById("GRange");
                                        var outputG = document.getElementById("Gtext");
                                        outputG.innerHTML = sliderG.value; // Display the default slider value
                                        sliderG.oninput = function () {
                                            outputG.innerHTML = sliderG.value;
                                            g = sliderG.value;
                                            square.style.backgroundColor = ["rgb(", r, ",", g, ",", b, ")"].join("");
                                            brush.color_r = r;
                                            brush.color_g = g;
                                            brush.color_b = b;
                                            brush.clarity = c;
                                            brush.emission = e;
                                            brush.palette_id = p;
                                        }

                                        var sliderB = document.getElementById("BRange");
                                        var outputB = document.getElementById("Btext");
                                        outputB.innerHTML = sliderB.value; // Display the default slider value
                                        sliderB.oninput = function () {
                                            outputB.innerHTML = sliderB.value;
                                            b = sliderB.value;
                                            square.style.backgroundColor = ["rgb(", r, ",", g, ",", b, ")"].join("");
                                            brush.color_r = r;
                                            brush.color_g = g;
                                            brush.color_b = b;
                                            brush.clarity = c;
                                            brush.emission = e;
                                            brush.palette_id = p;
                                        }

                                        var sliderA = document.getElementById("ARange");
                                        var outputA = document.getElementById("Atext");
                                        outputA.innerHTML = sliderA.value; // Display the default slider value
                                        sliderA.oninput = function () {
                                            outputA.innerHTML = sliderA.value;
                                            c = sliderA.value;
                                            gora.style.opacity = c / 255;
                                            brush.color_r = r;
                                            brush.color_g = g;
                                            brush.color_b = b;
                                            brush.clarity = c;
                                            brush.emission = e;
                                            brush.palette_id = p;
                                        }

                                        var sliderE = document.getElementById("ERange");
                                        var outputE = document.getElementById("Etext");
                                        outputE.innerHTML = sliderE.value; // Display the default slider value
                                        sliderE.oninput = function () {
                                            outputE.innerHTML = sliderE.value;
                                            e = sliderE.value;
                                            brush.color_r = r;
                                            brush.color_g = g;
                                            brush.color_b = b;
                                            brush.clarity = c;
                                            brush.emission = e;
                                            brush.palette_id = p;
                                        }

                                        var sliderP = document.getElementById("PRange");
                                        var outputP = document.getElementById("Ptext");
                                        outputP.innerHTML = sliderP.value; // Display the default slider value
                                        sliderP.oninput = function () {
                                            outputP.innerHTML = sliderP.value;
                                            p = sliderP.value;
                                            brush.color_r = r;
                                            brush.color_g = g;
                                            brush.color_b = b;
                                            brush.clarity = c;
                                            brush.emission = e;
                                            brush.palette_id = p;
                                        }

                                        sliderR.value = r;
                                        sliderG.value = g;
                                        sliderB.value = b;
                                        sliderA.value = c;
                                        sliderE.value = e;
                                        sliderP.value = p;

                                        outputR.innerHTML = r;
                                        outputG.innerHTML = g;
                                        outputB.innerHTML = b;
                                        outputA.innerHTML = c;
                                        outputE.innerHTML = e;
                                        outputP.innerHTML = p;

                                        gora.style.opacity = c / 255;
                                        square.style.backgroundColor = ["rgb(", r, ",", g, ",", b, ")"].join("");
                                        brush.color_r = r;
                                        brush.color_g = g;
                                        brush.color_b = b;
                                        brush.clarity = c;
                                        brush.emission = e;
                                        brush.palette_id = p;
                                    </script>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>


                <div class="pole2">
                    <div class="edytor">BRUSH</div>
                    <div class="suwaki2">

                        <font style="font-size: 30px; color: white; font-family: Impact">Size</font>
                        <input type="range" min="1" max="40" value="1" class="slider5" id="BsRange">
                        <span style="font-size: 30px; color: white; font-family: Impact" id="demo4"></span>

                        <font style="font-size: 30px; color: white; font-family: Impact; position:absolute; top: 50px; left: 0px">SQUARE BRUSH</font>
                        <input type="checkbox" id="kwadratowypedzelid" name="kwadratowypedzel">


                    </div>

                    <div id="circle"></div>

                    <script>
                        var bs = 1;
                        var circle = document.getElementById("circle");
                        var zaznaczenie = document.getElementById('kwadratowypedzelid');


                        var slider4 = document.getElementById("BsRange");
                        var output4 = document.getElementById("demo4");
                        output4.innerHTML = slider4.value; // Display the default slider value
                        slider4.oninput = function () {
                            output4.innerHTML = slider4.value;
                            bs = slider4.value;
                            circle.style.height = (bs * 2).toString() + "px";
                            circle.style.width = (bs * 2).toString() + "px";
                            var x = 443;
                            var y = 145;

                            circle.style.left = (x - bs * 2 / 2).toString() + "px";
                            circle.style.top = (y - bs * 1).toString() + "px";
                            brush.diameter = bs;
                        }
                        zaznaczenie.checked = false;
                        brush.type = zaznaczenie.checked;
                        zaznaczenie.addEventListener('change', () => {
                            if (zaznaczenie.checked) {
                                circle.style.borderRadius = (0).toString() + "%";
                                console.log("z");
                            }
                            else {
                                circle.style.borderRadius = (50).toString() + "%";
                            }
                            brush.type = zaznaczenie.checked;
                        });

                        slider4.value = bs;

                        circle.style.height = (bs * 2).toString() + "px";
                        circle.style.width = (bs * 2).toString() + "px";
                        var x = 443;
                        var y = 145;

                        circle.style.left = (x - bs * 2 / 2).toString() + "px";
                        circle.style.top = (y - bs * 1).toString() + "px";
                        brush.diameter = bs;
                        output4.innerHTML = bs;

                    </script>

                </div>

                <div class="pole3">
                    <div class="edytor">WORLD</div>
                    <button type="button" id="save" onclick="save('save')">Save world</button>
                    <button type="button" id="open" onclick="loadFile()">Open world</button>
                    <!--<div class="malyedytor">SEED</div>
    <div id="seedp"><input type="text" name="seed" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');"></div>
    <button type="button" id="applyseed" onclick="">Apply</button>-->
                </div>


                <!--
    <div class="pole4">
        <div class="edytordlugi">GRAPHIC SETTINGS</div>
        <select name="rozmiar" id="rozmiar" multiple>
            <option value="1">640 x 360</option>
            <option value="2">800 x 600</option>
            <option value="3">1024 x 768</option>
            <option value="4">1280 x 720</option>
            <option value="5">1440 x 900</option>
            <option value="6">1920 x 1080</option>
            <option value="7">2560 x 1440</option>

        </select>
        <input type="submit" value="Submit">
    </div>
        -->

                <div class="pole5">
                    <div class="edytordlugi">CONTROL SETTINGS</div>
                    <div class="suwaki3">

                        <font style="font-size: 30px; color: white; font-family: Impact">MOUSE SENSITIVITY</font>
                        <input type="range" min="1" max="100" value="50" class="slider5" id="MSRange">
                        <span style="font-size: 30px; color: white; font-family: Impact" id="demo5"></span>
                        <br>

                        <font style="font-size: 30px; color: white; font-family: Impact">FLYING SPEED</font>
                        <input type="range" min="1" max="100" value="50" class="slider5" id="FSRange" style="position:absolute; left: 235px; top: 42px" ;>
                        <span style="font-size: 30px; color: white; font-family: Impact; position:absolute; left: 424px; top: 42px" ;" id="demo6"></span>

                    </div>

                    <div class="malyedytor" style="position:absolute; left: 240px; top: 220px">
                        CONTROLS
                    </div>

                    

                    <div class="tabelas">
                        Place voxel &emsp; &emsp; &emsp; &emsp; &emsp; &emsp; &emsp; LMB
                        <br>
                        Remove voxel &emsp; &emsp; &emsp; &emsp; &emsp; &emsp; RMB
                        <br>
                        Sample color &emsp; &emsp; &emsp; &emsp; &emsp; &emsp; MMB
                        <br>
                        Show pointer &emsp; &emsp; &emsp; &emsp; &emsp; &ensp; Enter/Esc
                        <br>
                        Move &emsp; &emsp; &emsp; &emsp; &emsp; &emsp; &emsp; &ensp; W/A/S/D/Q/E
                    </div>

                    <script>

                        var ms = 50;
                        var fs = 50;

                        var slider5 = document.getElementById("MSRange");
                        var output5 = document.getElementById("demo5");
                        output5.innerHTML = slider5.value; // Display the default slider value
                        slider5.oninput = function () {
                            output5.innerHTML = slider5.value;
                            ms = slider5.value;
                            sensivity = ms / 100;
                        }
                        slider5.value = ms;
                        output5.innerHTML = ms;
                        sensivity = ms / 100;

                        var slider6 = document.getElementById("FSRange");
                        var output6 = document.getElementById("demo6");
                        output6.innerHTML = slider6.value; // Display the default slider value
                        slider6.oninput = function () {
                            output6.innerHTML = slider6.value;
                            fs = slider6.value;
                            speed = fs / 50;
                        }
                        slider6.value = fs;
                        output6.innerHTML = fs;
                        speed = fs / 50;

                    </script>

                </div>
            </div>
    </div>
</body>
</html>
